import{$ as O,U as j,X as w,Y as A,a as p,b as h,c as g,d as b,e as o,f as l,g as a,m as I,q as S}from"./chunk-HI4M3FS4.js";var u=class i{constructor(){}calculateResult(e){let t=[],r=[];for(let n of e)this.checkIfObjectsAreEqual(n.answer,n.correct_answer)?t.push(n):r.push(n);return{correct:t,wrong:r}}createGroupQuestions(e,t){return this.shuffle(this.filter(e,t))}checkIfObjectsAreEqual(e,t){return e.length!==t.length?!1:e.every((r,n)=>JSON.stringify(r)===JSON.stringify(t[n]))}filter(e,t){let r=e??[],n=[],c=JSON.parse(JSON.stringify(t));for(let s of r){let T=c.filter(_=>_.category.toLowerCase()===s.key.toLowerCase()).slice(0,s.value);n.push(...T)}return n.map(s=>h(p({},s),{options:this.shuffle(s.options)}))}shuffle(e){let t=[...e];for(let r=t.length-1;r>0;r--){let n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}static \u0275fac=function(t){return new(t||i)};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};var m=class i{constructor(){}on(e){let t=[],r=!0;for(let n of e){let c=["title","subtitle","category","description_seo","id","guide"];for(let s of c)this.validate(n[s])||(r=!1);r&&t.push(n)}return t}onQuestions(e){let t=!1;for(let r of e){let n=["category","description","type"];for(let c of n)this.validate(r[c])||(t=!0);(!this.isCorrectAnswer(r.correct_answer)||!this.onlyOneCorrectAnswer(r.correct_answer[0],r.options)||!this.hasFourNonEmptyStrings(r.options))&&(t=!0,console.error("Ocorreu algum erro na quest\xE3o: ",r.description))}return t}validate(e){return!!e}isCorrectAnswer(e){return Array.isArray(e)&&e.length===1&&typeof e[0]=="string"&&e[0].trim().length>0}onlyOneCorrectAnswer(e,t){return Array.isArray(t)?t.filter(n=>n===e).length===1:!1}hasFourNonEmptyStrings(e){return Array.isArray(e)?e.filter(r=>typeof r=="string"&&r.trim().length>0).length===4:!1}static \u0275fac=function(t){return new(t||i)};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};var y=class i{constructor(e){this.http=e}manifest(){return this.http.get("/acertai_ui/assets/json/manifest.json").pipe(g(e=>e.simulations))}manifestById(e){return this.manifest().pipe(b(t=>{let r=t.find(n=>n.id===e);return this.questionsById(r)}))}questionsById(e){return this.http.get(`/acertai_ui/assets/json/${e.id}.json`).pipe(g(t=>p(p({},e),t)))}static \u0275fac=function(t){return new(t||i)(l(j))};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};var v=class i{constructor(e,t){this.titleService=e;this.metaService=t}updateSeoTags(e,t){let r=`Acerta\xED | ${e}`;this.titleService.setTitle(r),this.metaService.updateTag({name:"description",content:t}),this.metaService.updateTag({property:"og:title",content:r}),this.metaService.updateTag({property:"og:description",content:t}),this.metaService.updateTag({name:"twitter:card",content:"summary_large_image"}),this.metaService.updateTag({name:"twitter:title",content:r}),this.metaService.updateTag({name:"twitter:description",content:t})}static \u0275fac=function(t){return new(t||i)(l(A),l(w))};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};var d=class i{config_service=a(u);http_service=a(y);seo_service=a(v);validator_service=a(m);constructor(){}listSimulations(){return this.http_service.manifest()}simulation(e){return this.http_service.manifestById(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};var C=class i{app_service=a(d);route=a(O);manifest;id=null;is_loading=I(!0);constructor(){this.id=this.route.snapshot.paramMap.get("id")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-abstraction-page"]],decls:0,vars:0,template:function(t,r){},encapsulation:2})};export{C as a};
